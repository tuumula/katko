<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="nettisivuntyyli.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat&display=swap">
    <title>Tuomas Paloheimo - 2024</title>

</head>
<body>

    <header>
        <h1>TUOMAS PALOHEIMO</h1>
    </header>

    <nav> 
        <a href="index.html">Home</a>
        <a href="infosivu.html">Information</a>
        <a href="historia.html">Website history</a>

    </nav>

    <section class ="fade-in">
        <h2>Welcome!</h2>

        <div class="divider"></div>

        <a href="https://www.is.fi/">Read some Ilta-Sanomat?</a>

        <div class="divider"></div>

        <h2>Number guessing game:</h2>
        <p>Pick a number between 1 and 100:</p>
        <input type="number" id="guessInput" min="1" max="100">
        <button id="guessButton">GUESS</button>
        <button id="resetButton">RESET</button>
        <p id="message">ANSWER:</p>

        <div class="divider"></div>

        <p>More content to be added soon.</p>

        <div class="divider"></div>

        <input type="text" id="countryName" placeholder="Enter country name">
        <button onclick="fetchCountryData()">Get Country Info</button>
    
        <div id="countryData"></div>
    
        <script>
            function fetchCountryData() {
                const countryName = document.getElementById('countryName').value;
                const url = `https://restcountries.com/v3.1/name/${countryName}`;
    
                fetch(url)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error("Country not found");
                        }
                        return response.json();
                    })
                    .then(data => {
                        const country = data[0];
                        const countryInfo = `
                            <h2>${country.name.common}</h2>
                            <p><strong>Capital:</strong> ${country.capital ? country.capital[0] : "N/A"}</p>
                            <p><strong>Population:</strong> ${country.population.toLocaleString()}</p>
                            <p><strong>Region:</strong> ${country.region}</p>
                            <p><strong>Subregion:</strong> ${country.subregion}</p>
                            <p><strong>Languages:</strong> ${Object.values(country.languages).join(", ")}</p>
                            <p><strong>Currency:</strong> ${Object.values(country.currencies)[0].name} (${Object.keys(country.currencies)[0]})</p>
                            <p><strong>Flag:</strong></p>
                            <img src="${country.flags.svg}" alt="Flag of ${country.name.common}" width="100">
                        `;
                        document.getElementById('countryData').innerHTML = countryInfo;
                    })
                    .catch(error => {
                        document.getElementById('countryData').innerHTML = `<p class="error">${error.message}</p>`;
                    });
            }
        </script>

        <div class="divider"></div>

        <h1>Trivia Visa</h1>
    <p id="question">Ladataan kysymystä...</p>

    <div id="answers"></div>

    <div id="result"></div>

    <body>

        <h1>Trivia Visa</h1>
    
        <!-- Kategoriavalinta -->
        <div id="category-selector">
            <label for="category">Valitse kategoria:</label>
            <select id="category">
                <option value="">Kaikki</option>
                <option value="9">Yleistieto</option>
                <option value="17">Tiede</option>
                <option value="23">Historia</option>
                <option value="21">Urheilu</option>
            </select>
            <button onclick="startTrivia()">Aloita Visa</button>
        </div>
    
        <p id="question">Ladataan kysymystä...</p>
    
        <div id="answers"></div>
    
        <div id="result"></div>
        <div id="timer">Aika jäljellä: <span id="time-left">30</span> sekuntia</div>
        <div id="score">Pisteet: <span id="score-count">0</span></div>
    
        <script>
            let correctAnswer = '';
            let score = 0;
            let timer;
            let timeLeft = 30;
    
            // Hae trivia API:sta valitun kategorian perusteella
            function startTrivia() {
                score = 0;
                document.getElementById('score-count').textContent = score;
                fetchTriviaQuestion();
            }
    
            function fetchTriviaQuestion() {
                const category = document.getElementById('category').value;
                let url = `https://opentdb.com/api.php?amount=1&type=multiple`;
                if (category) {
                    url += `&category=${category}`;
                }
                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        displayQuestion(data.results[0]);
                        startTimer(); // Käynnistä ajastin
                    })
                    .catch(error => {
                        console.log("Virhe haettaessa triviaa:", error);
                        document.getElementById('question').textContent = "Kysymyksen lataaminen epäonnistui.";
                    });
            }
    
            // Näytä kysymys ja vastausvaihtoehdot
            function displayQuestion(triviaData) {
                const questionElement = document.getElementById('question');
                const answersElement = document.getElementById('answers');
                const resultElement = document.getElementById('result');
                const timeLeftElement = document.getElementById('time-left');
    
                // Nollaa tila
                answersElement.innerHTML = '';
                resultElement.innerHTML = '';
                timeLeft = 30; // Nollaa ajastin
                timeLeftElement.textContent = timeLeft;
    
                // Näytä kysymys
                questionElement.innerHTML = triviaData.question;
    
                // Aseta oikea vastaus
                correctAnswer = triviaData.correct_answer;
    
                // Yhdistä oikea ja väärät vastaukset yhdeksi listaksi
                let answers = [...triviaData.incorrect_answers];
                answers.push(correctAnswer);
    
                // Sekoita vastausvaihtoehdot
                answers = shuffleArray(answers);
    
                // Luo napit vastausvaihtoehdoille
                answers.forEach(answer => {
                    const button = document.createElement('button');
                    button.classList.add('answer');
                    button.innerHTML = answer;
                    button.onclick = () => checkAnswer(answer);
                    answersElement.appendChild(button);
                });
            }
    
            // Tarkista vastaus ja päivitä pisteet
            function checkAnswer(selectedAnswer) {
                const resultElement = document.getElementById('result');
                if (selectedAnswer === correctAnswer) {
                    resultElement.innerHTML = "<span style='color:green;'>Oikein!</span>";
                    score++;
                } else {
                    resultElement.innerHTML = "<span style='color:red;'>Väärin! Oikea vastaus on: " + correctAnswer + "</span>";
                }
                document.getElementById('score-count').textContent = score;
                clearTimeout(timer); // Pysäytä ajastin
                setTimeout(fetchTriviaQuestion, 3000); // Hae uusi kysymys 3 sekunnin kuluttua
            }
    
            // Apufunktio vastausten sekoittamiseen
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
    
            // Ajastimen hallinta
            function startTimer() {
                const timeLeftElement = document.getElementById('time-left');
                timer = setInterval(() => {
                    timeLeft--;
                    timeLeftElement.textContent = timeLeft;
                    if (timeLeft <= 0) {
                        clearInterval(timer); // Pysäytä ajastin
                        checkAnswer(""); // Jos aika loppuu, automaattinen väärä vastaus
                    }
                }, 1000);
            }
        </script>
    
        <div class="divider"></div>

        <h2>CHANGE LOG: </h2>

        <table class="modern-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Change</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>25.9.2024</td>
                    <td>Implemented Git to VSCode: commits and pushes through VSCode.</td>
                </tr>
                <tr>
                    <td>10.9.2024</td>
                    <td>Added a photo to 'Website history'.</td>
                </tr>
                <tr>
                    <td>22.2.2024</td>
                    <td>Minor CSS improvements.</td>
                </tr>
                <tr>
                    <td>6.2.2024</td>
                    <td>Font and coloring improvements.</td>
                </tr>
                <tr>
                    <td>27.1.2024</td>
                    <td>Added 'Website history'.</td>
                </tr>
                <tr>
                    <td>26.1.2024</td>
                    <td>Published the website.</td>
                </tr>
            </tbody>
        </table>
    </div>
    </section>

    <footer class="box">
        <p>&copy; 2024</p>
    </footer>
    <button id="backToTopBtn" style="display: none;">Back to top</button>
    <script src="script.js"></script>
    <script src="game.js"></script>
</body>
</html> 
